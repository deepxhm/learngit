add pay function and test
